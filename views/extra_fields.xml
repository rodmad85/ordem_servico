<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2022 Madureira License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl). -->
<odoo>
    <record id="extra_fields_attendence_search" model="ir.ui.view">
       <field name="name">Filtro OS</field>
       <field name="inherit_id" ref="hr_attendance.hr_attendance_view_filter" />
       <field name="model">hr.attendance</field>
       <field name="arch" type="xml">
           <xpath expr="//search/group" position="inside">
               <filter string="Ordem de Serviço" name="os_tree" domain="[]" context="{'group_by':'os_tree', 'default_order':'os_tree'}" />
           </xpath>
           <xpath expr="//search/field[@name='employee_id']" position="before">
               <field name="os_tree"/>
               <filter string="Ordem de Serviço" name="os_tree"/>
           </xpath>
       </field>
    </record>

    <record id="extra_fields_attendence" model="ir.ui.view">
       <field name="name">Adiciona valor hora e valor total</field>
       <field name="inherit_id" ref="hr_attendance.view_attendance_tree" />
       <field name="model">hr.attendance</field>
       <field name="arch" type="xml">
           <xpath expr="//tree" position="inside">
               <header>
                   <button name="upaponta" string="Atualiza Valor Total" class="btn-primary" invisible="0" type="object"/>

                   <button name="upvalor" string="Atualiza Valor Hora" class="btn-secondary" invisible="0" type="object"/>
               </header>
           </xpath>
           <xpath expr="//field[@name='employee_id']" position="after">
               <field name="currency_id" invisible="1"/>
               <field name="os_tree" string="OS"/>
               <field name="ordem_servico" string="Ordem de Serviço" widget="many2many_tags" invisible="1"/>
           </xpath>
           <xpath expr="//field[@name='employee_id']" position="after">
               <field name="retrabalho"/>
           </xpath>
           <xpath expr="//field[@name='retrabalho']" position="after">
               <field name="hora_not"/>
           </xpath>
           <xpath expr="//field[@name='hora_not']" position="after">
               <field name="cem_porcento"/>
           </xpath>
           <xpath expr="//field[@name='check_out']" position="after">
               <field name="valor_hora" widget="monetary" options="{'currency': %(base.BRL)d}" groups="ordem_servico.ordem_admin"/>

           </xpath>
            <xpath expr="//field[@name='worked_hours']" position="before">
               <field name="normal_total" widget="float_time"/>
               <field name="extra_total" widget="float_time"/>

           </xpath>
           <xpath expr="//field[@name='worked_hours']" position="after">
               <field name="valor_total" widget="monetary" options="{'currency': %(base.BRL)d}" groups="ordem_servico.ordem_admin"/>

           </xpath>
       </field>
   </record>

    <record id="valor_hora_employee" model="ir.ui.view">
       <field name="name">Adiciona valor hora</field>
       <field name="inherit_id" ref="hr.view_employee_form" />
       <field name="model">hr.employee</field>
       <field name="arch" type="xml">
           <xpath expr="//field[@name='coach_id']" position="after">
               <field name="valor_hora"/>
               <field name="tipo_contrato"/>
           </xpath>
       </field>
   </record>

    <record id="sale_order_orcamento" model="ir.ui.view">
       <field name="name">sale.order.orcamento</field>
       <field name="inherit_id" ref="sale.view_order_form" />
       <field name="model">sale.order</field>
       <field name="arch" type="xml">
         <xpath expr="//form/sheet/notebook/page[1]" position="after">
              <page string="Orçamento" attrs="{'invisible':[('grupo','=', False)]}">
                   <group>
                        <field name="horas_mo" string="Total Horas" attrs="{'required': [('state', '=', 'sale')]}"/>
                        <field name="valor_horas" string="Valor Total Horas" attrs="{'required': [('state', '=', 'sale')]}"/>
                        <field name="terceiros" />
                        <field name="materia_prima" string="Valor Matéria Prima"/>
                        <field name="resultado" invisible="0"/>
                   </group>
              </page>
          </xpath>
           <xpath expr="//field[@name='partner_id']" position="after">
                <field name="pedidos_cliente" widget="many2many_binary" attrs="{'required': [('state', '=', 'sale')]}"/>
           </xpath>

           <xpath expr="//field[@name='order_line']/tree/field[@name='discount']" position="after"><!--<xpath expr="//field[@name='order_line']/tree" position="inside">-->
               <field name="valordesc"/>
           </xpath>


          <xpath expr="//field[@name='partner_id']" position="after">
                  <field name="ordem_servico" widget="many2many_tags" options="{'no_create': True, 'no_create_edit': True}"/>
          </xpath>

           <xpath expr="//field[@name='partner_id']" position="after">
                  <field name="grupo" invisible="1"/>
          </xpath>

           <xpath expr="//field[@name='fiscal_position_id']" position="attributes">
                   <attribute name="required">True</attribute>
           </xpath>

           <xpath expr="//field[@name='payment_term_id']" position="attributes">
                <attribute name="required">True</attribute>
           </xpath>


           <xpath expr="//field[@name='payment_term_id']" position="after">
            <xpath expr="//field[@name='fiscal_position_id']" position="move"/>
          </xpath>




           <xpath expr="//field[@name='analytic_account_id']" position="after">
            <xpath expr="//field[@name='pricelist_id']" position="move"/>
          </xpath>

           <xpath expr="//field[@name='fiscal_position_id']" position="after">
            <xpath expr="//field[@name='tag_ids']" position="move"/>
          </xpath>

          <xpath expr="//field[@name='ordem_servico']" position="before">
            <xpath expr="//field[@name='client_order_ref']" position="move"/>
          </xpath>

           <xpath expr="//field[@name='order_line']/tree/field[@name='price_unit']" position="before">
               <field name="mo_line" optional="show"/>
               <field name="mp_line" optional="show"/>
           </xpath>
            <xpath expr="//field[@name='order_line']/tree/field[@name='product_uom']" position="attributes">
                <attribute name="options">{'no_create': True, 'no_create_edit': True}</attribute>

           </xpath>

       </field>
    </record>

    <record id="sale_order_os" model="ir.ui.view">
    <field name="name">sale.order.os</field>
    <field name="inherit_id" ref="sale.view_quotation_tree" />
    <field name="model">sale.order</field>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='name']" position="after">
            <field name="ordem_servico" string="OS" widget="many2many_tags" optional="show"/>
        </xpath>

         <xpath expr="//field[@name='amount_total']" position="before">
            <field name="mediadesc" string="Desconto(%)" optional="show" avg="Media de Desconto"/>
<!--            <field name="discount_total" string="Total Desconto" optional="show" sum="Total Desconto"/>-->
        </xpath>

    </field>
</record>

    <record id="account_move_os_tree" model="ir.ui.view">
    <field name="name">account.move.os.tree</field>
    <field name="inherit_id" ref="account.view_out_invoice_tree" />
    <field name="model">account.move</field>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='name']" position="after">
            <field name="ordem_servico" string="OS" widget="many2many_tags" optional="show"/>
        </xpath>
    </field>
</record>

    <record id="account_move_os_form" model="ir.ui.view">
    <field name="name">account.move.os.form</field>
    <field name="inherit_id" ref="account.view_move_form" />
    <field name="model">account.move</field>
    <field name="arch" type="xml">
        <xpath expr="//group[@id='header_right_group']" position="after">
            <group>
                <field name="ordem_servico" string="OS" widget="many2many_tags"/>
            </group>
        </xpath>
    </field>
</record>

    <record id="mrp_production_os" model="ir.ui.view">
    <field name="name">mrp.production.os</field>
    <field name="inherit_id" ref="mrp.mrp_production_tree_view" />
    <field name="model">mrp.production</field>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='name']" position="before">
            <field name="ordem_servico" string="OS" widget="many2many_tags" optional="show"/>
        </xpath>
        <xpath expr="//field[@name='company_id']" position="after">
            <field name="andamento" string="Andamento" optional="show"/>
            <field name="terceiros" string="Terceiros" optional="show"/>
        </xpath>
    </field>
</record>

    <record id="mrp_production_os_form" model="ir.ui.view">
    <field name="name">mrp.production.os.form</field>
    <field name="inherit_id" ref="mrp.mrp_production_form_view" />
    <field name="model">mrp.production</field>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='user_id']" position="after">
            <field name="ordem_servico" string="OS" widget="many2many_tags"/>
        </xpath>
        <xpath expr="//field[@name='bom_id']" position="after">
        <field name="andamento" string="Andamento" />
            <field name="terceiros" string="Terceiros" attrs="{'invisible':[('andamento','!=','terceiro')],'required':[('andamento','=','terceiro')]}"/>
        </xpath>

          <xpath expr="//field[@name='move_raw_ids']/tree/field[@name='product_id']" position="after"><!--<xpath expr="//field[@name='order_line']/tree" position="inside">-->
               <field name="dimensoes"/>

           </xpath>
           <xpath expr="//field[@name='move_raw_ids']/tree/field[@name='product_uom']" position="after"><!--<xpath expr="//field[@name='order_line']/tree" position="inside">-->
                <field name="estoque"/>
           </xpath>

    </field>
</record>

    <record id="mrp_bom_os" model="ir.ui.view">
        <field name="name">mrp.bom.os</field>
        <field name="inherit_id" ref="mrp.mrp_bom_form_view"/>
        <field name="model">mrp.bom</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='bom_line_ids']/tree/field[@name='product_id']" position="after"><!--<xpath expr="//field[@name='order_line']/tree" position="inside">-->
                 <field name="dimensoes"/>
           </xpath>
             <xpath expr="//field[@name='bom_line_ids']/tree/field[@name='product_id']" position="replace">
                <field name="product_id" domain="[('type', 'in',('product', 'consu'))]"/>
             </xpath>
           <xpath expr="//field[@name='bom_line_ids']/tree/field[@name='product_uom_id']" position="after"><!--<xpath expr="//field[@name='order_line']/tree" position="inside">-->
                <field name="estoque"/>
           </xpath>
        </field>
    </record>

    <record id="purchase_os_form_line" model="ir.ui.view">
       <field name="name">purchase.os.form</field>
       <field name="inherit_id" ref="purchase.purchase_order_form" />
       <field name="model">purchase.order</field>
       <field name="arch" type="xml">
           <xpath expr="//field[@name='order_line']/tree" position="inside">
               <field name="ordem_servico" string="OS" widget="many2many_tags"/>
           </xpath>

           <xpath expr="//field[@name='origin']" position="after">
               <field name="forma_pagamento" string="Forma de Pagamento" />
           </xpath>

             <xpath expr="//form/sheet/notebook/page[2]" position="after">
              <page string="Total OS">

                <group>
                    <button name="uposs" string="Atualizar" class="btn-primary" invisible="0" type="object"/>
                    <field name="oss" widget="section_and_note_one2many" mode="tree,kanban" nolabel="1">

                        <tree string="Total OS" editable="bottom">
                            <field name="os" string="Ordem de Serviço"/>
                            <field name="valor" sum="Total Geral"/>

                        </tree>
                    </field>
                </group>
              </page>
            </xpath>
       </field>
</record>

    <record id="purchase_os_form" model="ir.ui.view">
       <field name="name">purchase.os.form</field>
       <field name="inherit_id" ref="purchase_stock.purchase_order_view_form_inherit" />
       <field name="model">purchase.order</field>
       <field name="arch" type="xml">
           <xpath expr="//field[@name='order_line']/form//field[@name='account_analytic_id']" position="before">
                <field name="ordem_servico" string="OS" widget="many2many_tags"/>
            </xpath>
       </field>
    </record>

    <record id="product_cat_os_form" model="ir.ui.view">
        <field name="name">product_os_form</field>
        <field name="inherit_id" ref="product.product_category_form_view"/>
        <field name="model">product.category</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='parent_id']" position="after">
                <field name="comercial"/>
                <field name="certificado"/>
            </xpath>
        </field>

    </record>

     <record id="product_cert_os_form" model="ir.ui.view">
        <field name="name">product_cert_form</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="model">product.template</field>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='general_information']//group[@name='group_general']//field[@name='categ_id']" position="after">
                <field name="certificado" readonly="1"/>
            </xpath>
        </field>

    </record>

    <record id="product_cat_os_tree" model="ir.ui.view">
        <field name="name">product_os_tree</field>
        <field name="inherit_id" ref="product.product_category_list_view"/>
        <field name="model">product.category</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='display_name']" position="after">
                <field name="comercial"/>
                <field name="certificado"/>
                <field name="product_count"/>
            </xpath>
        </field>

    </record>

    <record id="stock_os_form" model="ir.ui.view">
       <field name="name">stock.os.form</field>
       <field name="inherit_id" ref="stock.view_stock_quant_tree_editable" />
       <field name="model">stock.quant</field>
       <field name="arch" type="xml">
           <xpath expr="//field[@name='location_id']" position="after">
               <field name="obs" />
           </xpath>
       </field>
   </record>

    <record id="stock_quant_os" model="ir.ui.view">
       <field name="name">stock.quant.os</field>
       <field name="inherit_id" ref="stock.view_picking_form" />
       <field name="model">stock.picking</field>
       <field name="arch" type="xml">
           <xpath expr="//field[@name='move_ids_without_package']/tree" position="inside">
               <field name="ordem_servico" widget="many2many_tags"/>
               <field name="certificado"/>
           </xpath>
       </field>
   </record>


    <record id="os_impostos_position" model="ir.ui.view">
    <field name="name">os.impostos.position</field>
    <field name="model">l10n_br_fiscal.operation</field>
    <field name="inherit_id" ref="l10n_br_fiscal.operation_form" />
    <field name="arch" type="xml">
        <xpath expr="//notebook" position="inside">
            <page name="Taxas" string="Taxas">
                <field name="meses" string="Meses" widget="section_and_note_one2many" mode="tree,kanban" nolabel="1">
                    <tree string="Taxas" editable="bottom">
                        <field name="mes"/>
                        <field name="percentual"/>
                    </tree>
                </field>
            </page>
        </xpath>
    </field>
</record>


    <record id="os_fiscal_document" model="ir.ui.view">
    <field name="name">os.fiscal.document</field>
    <field name="model">l10n_br_fiscal.document</field>
    <field name="inherit_id" ref="l10n_br_fiscal.document_form" />
    <field name="arch" type="xml">
        <xpath expr="//field[@name='user_id']" position="after">
                <field name="ordem_servico" string="OS" widget="many2many_tags"/>
            </xpath>
    </field>
</record>

        <record id="os_mgmt_form" model="ir.ui.view">
            <field name="name">os.mgmt.form</field>
            <field name="model">mgmtsystem.nonconformity</field>
            <field name="inherit_id" ref="mgmtsystem_nonconformity.view_mgmtsystem_nonconformity_form" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='company_id']" position="after">
                        <field name="ordem_servico" string="OS" widget="many2many_tags"/>
                    </xpath>
            </field>
        </record>


</odoo>